services:
  - type: web
    name: fuel-backend
    env: python
    plan: free
    buildCommand: pip install -r backend/requirements.txt
    startCommand: uvicorn backend.main:app --host 0.0.0.0 --port $PORT
    envVars:
      - key: SUPABASE_URL
        sync: false
      - key: SUPABASE_SERVICE_ROLE
        sync: false

cronJobs:
  - name: daily-pipeline
    schedule: "0 1 * * *"    # daily at 1AM UTC
    command: "python pipeline/run_daily_pipeline.py"
    plan: free